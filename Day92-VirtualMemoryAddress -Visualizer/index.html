<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Memory Playground</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>Virtual Memory Playground</h1>
            <p class="subtitle">Explore how virtual addresses are translated to physical addresses using page tables and
                TLB</p>
        </header>

        <div class="card">
            <div class="card-title">
                <span>üîç Address Translation</span>
            </div>
            <div class="input-section">
                <input type="text" id="virtual-address" placeholder="Enter a virtual address (e.g., 0x1234)"
                    value="0x2A7F">
                <button id="translate-btn">Translate Address</button>
                <button id="random-btn">Random Address</button>
            </div>
            <div class="address-breakdown">
                <div class="bit-group">
                    <div class="bit-label">Virtual Page Number</div>
                    <div class="bit-value" id="vpn">0x2A</div>
                </div>
                <div style="font-size: 1.5rem;">+</div>
                <div class="bit-group">
                    <div class="bit-label">Page Offset</div>
                    <div class="bit-value" id="offset">0x7F</div>
                </div>
            </div>
        </div>

        <div class="visualization">
            <div class="card tlb-section">
                <div class="card-title">
                    <span>‚ö° TLB (Translation Lookaside Buffer)</span>
                </div>
                <div class="memory-grid" id="tlb-grid">
                    <!-- TLB entries will be generated by JavaScript -->
                </div>
            </div>

            <div class="card page-table-section">
                <div class="card-title">
                    <span>üìÑ Page Table</span>
                </div>
                <div class="memory-grid" id="page-table-grid">
                    <!-- Page table entries will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <span>üîÑ Translation Process</span>
            </div>
            <div class="translation-steps">
                <div class="step" id="step1">
                    <div class="step-number">1</div>
                    <div class="step-content">Check TLB for VPN <span id="step1-vpn">0x2A</span></div>
                </div>
                <div class="step" id="step2">
                    <div class="step-number">2</div>
                    <div class="step-content">TLB Miss - Access Page Table</div>
                </div>
                <div class="step" id="step3">
                    <div class="step-number">3</div>
                    <div class="step-content">Page Table maps VPN <span id="step3-vpn">0x2A</span> to PFN <span
                            id="step3-pfn">0x0D</span></div>
                </div>
                <div class="step" id="step4">
                    <div class="step-number">4</div>
                    <div class="step-content">Update TLB with new mapping</div>
                </div>
                <div class="step" id="step5">
                    <div class="step-number">5</div>
                    <div class="step-content">Combine PFN <span id="step5-pfn">0x0D</span> with offset <span
                            id="step5-offset">0x7F</span></div>
                </div>
            </div>

            <div class="physical-address" id="physical-address">
                Physical Address: 0x0D7F
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="tlb-hits">0</div>
                    <div class="stat-label">TLB Hits</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="tlb-misses">0</div>
                    <div class="stat-label">TLB Misses</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="total-accesses">0</div>
                    <div class="stat-label">Total Accesses</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="hit-rate">0%</div>
                    <div class="stat-label">Hit Rate</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <span>üìö Memory Configuration</span>
            </div>
            <div class="config-section">
                <div class="config-item">
                    <label for="tlb-size">TLB Size:</label>
                    <select id="tlb-size">
                        <option value="4">4 entries</option>
                        <option value="8" selected>8 entries</option>
                        <option value="16">16 entries</option>
                    </select>
                </div>
                <div class="config-item">
                    <label for="page-size">Page Size:</label>
                    <select id="page-size">
                        <option value="128">128 bytes</option>
                        <option value="256" selected>256 bytes</option>
                        <option value="512">512 bytes</option>
                    </select>
                </div>
                <button id="reset-btn">Reset Simulation</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>